
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>Shelter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Donald Wu">
    

    
    <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Shelter">
<meta property="og:url" content="http://wuyihao14.github.io/page/3/index.html">
<meta property="og:site_name" content="Shelter">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shelter">
<meta name="twitter:description">

    
    <link rel="alternative" href="/atom.xml" title="Shelter" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Shelter" title="Shelter"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Shelter">Shelter</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜單">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:wuyihao14.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/11/02/MayorsPoster_线段树/" title="Mayor&#39;s Poster 线段树" itemprop="url">Mayor&#39;s Poster 线段树</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Donald Wu" target="_blank" itemprop="author">Donald Wu</a>
		
  <p class="article-time">
    <time datetime="2015-11-02T10:42:59.331Z" itemprop="datePublished"> 發表於 2015-11-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Mayor’s posters<br>Time Limit: 1000MS        Memory Limit: 65536KB        64bit IO Format: %I64d &amp; %I64u<br>Submit</p>
<p>Status</p>
<p>Description<br>The citizens of Bytetown, AB, could not stand that the candidates in the mayoral election campaign have been placing their electoral posters at all places at their whim. The city council has finally decided to build an electoral wall for placing the posters and introduce the following rules:<br>Every candidate can place exactly one poster on the wall.<br>All posters are of the same height equal to the height of the wall; the width of a poster can be any integer number of bytes (byte is the unit of length in Bytetown).<br>The wall is divided into segments and the width of each segment is one byte.<br>Each poster must completely cover a contiguous number of wall segments.</p>
<p>They have built a wall 10000000 bytes long (such that there is enough place for all candidates). When the electoral campaign was restarted, the candidates were placing their posters on the wall and their posters differed widely in width. Moreover, the candidates started placing their posters on wall segments already occupied by other posters. Everyone in Bytetown was curious whose posters will be visible (entirely or in part) on the last day before elections.<br>Your task is to find the number of visible posters when all the posters are placed given the information about posters’ size, their place and order of placement on the electoral wall.<br>Input<br>The first line of input contains a number c giving the number of cases that follow. The first line of data for a single case contains number 1 &lt;= n &lt;= 10000. The subsequent n lines describe the posters in the order in which they were placed. The i-th line among the n lines contains two integer numbers l i and ri which are the number of the wall segment occupied by the left end and the right end of the i-th poster, respectively. We know that for each 1 &lt;= i &lt;= n, 1 &lt;= l i &lt;= ri &lt;= 10000000. After the i-th poster is placed, it entirely covers all wall segments numbered l i, l i+1 ,… , ri.<br>Output<br>For each input data set print the number of visible posters after all the posters are placed. </p>
<p>The picture below illustrates the case of the sample input. </p>
<p>Sample Input<br>1<br>5<br>1 4<br>2 6<br>8 10<br>3 4<br>7 10<br>Sample Output<br>4<br>Source<br>Alberta Collegiate Programming Contest 2003.10.18</p>
<hr>
<p>线段树模板题<br>由于1 &lt;= l i &lt;= ri &lt;= 10000000条件的存在，导致建立线段树很困难。<br>然而1 &lt;= n &lt;= 10000，并且意识到两点之间的距离是无用的数据，因此进行离散化。<br>unique和sort是离散化的好帮手。</p>
<pre><code><span class="flow">if</span> (<span class="built_in">tree</span>[i] != -<span class="number">1</span>){
    <span class="built_in">tree</span>[i&lt;&lt;<span class="number">1</span>] = <span class="built_in">tree</span>[(i&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>] = <span class="built_in">tree</span>[i];
}
</code></pre><p>线段树的lazy处理，一定不要忘了配对的向上传递和向下传递。<br>这样避免了父亲存储了儿子的数据，却把儿子的信息丢掉了的情况（即因为两个儿子数据的不一致而置位-1）</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> &lt;cstdio&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;cstring&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;algorithm&gt;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">10300</span>;

<span class="keyword">bool</span> mark[N];
<span class="keyword">int</span> hash[<span class="number">10000010</span>];
<span class="keyword">int</span> tree[N&lt;&lt;<span class="number">4</span>];

<span class="keyword">struct</span> Edge{
    <span class="keyword">int</span> l,r;
}edge[N];

<span class="keyword">int</span> point[N&lt;&lt;<span class="number">2</span>];
<span class="keyword">int</span> psum;

<span class="function"><span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> ll,<span class="keyword">int</span> rr,<span class="keyword">int</span> c)</span></span>{
    <span class="keyword">int</span> mid = ((l+r)&gt;&gt;<span class="number">1</span>);

    <span class="keyword">if</span> (l&gt;=ll &amp;&amp; r&lt;=rr){
        tree[i] = c;
        <span class="keyword">return</span>;
    }
    <span class="keyword">if</span> (tree[i] != -<span class="number">1</span>){
        tree[i&lt;&lt;<span class="number">1</span>] = tree[(i&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>] = tree[i];
    }

    <span class="keyword">if</span> (rr &lt;= mid){
        change(i&lt;&lt;<span class="number">1</span>, l,mid, ll,rr,c);
    } <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(ll &gt; mid)</span> </span>{
        change((i&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>, mid+<span class="number">1</span>,r, ll,rr,c);
    } <span class="keyword">else</span> {
        change(i&lt;&lt;<span class="number">1</span>, l,mid, ll,mid,c);
        change((i&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>,mid+<span class="number">1</span>,r,mid+<span class="number">1</span>,rr,c);
    }
    <span class="keyword">if</span> (tree[i&lt;&lt;<span class="number">1</span>] == tree[(i&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>] &amp;&amp; tree[i&lt;&lt;<span class="number">1</span>]!=-<span class="number">1</span>){
        tree[i] = tree[i&lt;&lt;<span class="number">1</span>];
    }<span class="keyword">else</span>{
        tree[i] = -<span class="number">1</span>;
    }
}

<span class="function"><span class="keyword">void</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>{
    <span class="keyword">int</span> mid = ((l+r)&gt;&gt;<span class="number">1</span>);

    <span class="keyword">if</span> (tree[i] != -<span class="number">1</span>){
        mark[tree[i]] = <span class="keyword">true</span>;
        <span class="keyword">return</span>;
    }
    find(i&lt;&lt;<span class="number">1</span>,l,mid);
    find((i&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>,mid+<span class="number">1</span>,r);
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{
    <span class="keyword">int</span> c;
    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c);
    <span class="keyword">while</span> (c--){
        <span class="built_in">memset</span>(mark,<span class="number">0</span>,<span class="keyword">sizeof</span> mark);
        <span class="built_in">memset</span>(tree,<span class="number">0</span>,<span class="keyword">sizeof</span> tree);
        <span class="built_in">memset</span>(hash,<span class="number">0</span>,<span class="keyword">sizeof</span> hash);
        psum = <span class="number">0</span>;
        <span class="keyword">int</span> n;

        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);
        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){
            <span class="keyword">int</span> l,r;
            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;l,&amp;r);
            point[psum++] = l;
            point[psum++] = r;
            edge[i].l = l;
            edge[i].r = r;
        }

        sort(point,point+psum);
        <span class="keyword">int</span> npsum = unique(point,point+psum)-point;

        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;npsum;i++){
            hash[point[i]] = i+<span class="number">1</span>;
        }

        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){
            edge[i].l = hash[edge[i].l];
            edge[i].r = hash[edge[i].r];

            change(<span class="number">1</span>,<span class="number">1</span>,npsum,edge[i].l,edge[i].r,i+<span class="number">1</span>);
        }

        find(<span class="number">1</span>,<span class="number">1</span>,npsum);

        <span class="keyword">int</span> ans = <span class="number">0</span>;
        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n+<span class="number">1</span>;i++)
            <span class="keyword">if</span> (mark[i])
                ans ++;
        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/ACM/">ACM</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/11/02/AttackTheNEETPrincess/" title="Attack the NEET princess 双连通分量" itemprop="url">Attack the NEET princess 双连通分量</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Donald Wu" target="_blank" itemprop="author">Donald Wu</a>
		
  <p class="article-time">
    <time datetime="2015-11-02T10:42:59.331Z" itemprop="datePublished"> 發表於 2015-11-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Attack the NEET Princess<br>Time Limit: 9000MS        Memory Limit: 65536KB        64bit IO Format: %lld &amp; %llu<br>Submit</p>
<p>Status</p>
<p>Description<br>Houraisan Kaguya (蓬萊山輝夜) is the NEET (not in education, employment or training) princess living in Eientei (永遠亭). She is an unemployed geek, who sits at home and surfs the Internet all day. But today is different, as the Hakurei Shrine Reitaisai Festival (博麗神社例大祭) will be hosted in Hakurei Shrine, Kaguya decides to go to buy some new doujin games.</p>
<p>Fujiwara no Mokou (藤原妹紅) detests Kaguya, and has been planing to attack her for a long time. But she nerver got the chance before because Kaguya kept staying in Eientei, under the protection of Yagokoro Eirin (八意永琳). Knowing that Kaguya will go outside today, Mokou decides to wait on certain road and attack her once she passes there. Mokou don’t know which path Kaguya will choose, but she thinks that there always exits some roads where she can always meet Kaguya.</p>
<p>Input<br>There are multiple cases. Each case begins with two integers 2 ≤ n ≤ 10000 — the number of villages and 2 ≤ m ≤ 100000 — the number of roads. Then m lines, each contains two integers a and b (0 ≤ a, b &lt; n), indicating a road connecting village a and village b. Village 0 is Eientei and Village n-1 is Hakurei Shrine. They are always connected by roads. There may be more than one roads between two villages.</p>
<p>Output<br>Find out the roads where Mokou can always meet Kaguya. For each case, output the number of roads in the first line, then output the numbers of the roads in ascending order in the second line.</p>
<p>Sample Input<br>3 2<br>0 1<br>1 2</p>
<p>7 8<br>0 1<br>0 2<br>1 3<br>2 3<br>3 4<br>3 5<br>4 6<br>5 6</p>
<p>Sample Output<br>2<br>0 1<br>0</p>
<p>无向图找桥，再筛选一下桥，筛选的时候，注意到新的图变成了一棵树，因此遍历一次树即可，不需要回溯</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span>&lt;cstdio&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;algorithm&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span>&lt;cstring&gt;</span>
<span class="keyword">using</span> std::sort;
<span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">10010</span>;
<span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">100010</span>;

<span class="keyword">struct</span> EDGE
{
    <span class="keyword">int</span> v,next,i;
};
EDGE edge[M*<span class="number">2</span>],edge2[M*<span class="number">2</span>];
<span class="keyword">bool</span> vis[N];

<span class="keyword">int</span> first[N],low[N],dfn[N],belong[N],degree[N],sta[M],instack[M],first2[N];
<span class="keyword">int</span> g,cnt,top,scc,g2;
<span class="function"><span class="keyword">int</span> <span class="title">min</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span>
</span>{
    <span class="keyword">return</span> a&lt;b?a:b;
}
<span class="function"><span class="keyword">void</span> <span class="title">AddEdge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span>
</span>{
    edge[g].v=v;
    edge[g].next=first[u];
    first[u]=g++;
}
<span class="function"><span class="keyword">void</span> <span class="title">AddEdge2</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> i)</span>
</span>{
    edge2[g2].v=v;
    edge2[g2].i=i;
    edge2[g2].next=first2[u];
    first2[u]=g2++;
}
<span class="function"><span class="keyword">void</span> <span class="title">Tarjan</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> fa)</span>
</span>{
    <span class="keyword">int</span> i,v;
    low[u]=dfn[u]=++cnt;
    sta[++top]=u;
    instack[u]=<span class="number">1</span>;
    <span class="keyword">for</span>(i=first[u];i!=-<span class="number">1</span>;i=edge[i].next)
    {
        v=edge[i].v;
        <span class="keyword">if</span>(i==(fa^<span class="number">1</span>))
            <span class="keyword">continue</span>;
        <span class="keyword">if</span>(!dfn[v])
        {
            Tarjan(v,i);
            low[u]=min(low[u],low[v]);
        }
        <span class="function"><span class="keyword">else</span> <span class="title">if</span><span class="params">(instack[v])</span>
            low[u]</span>=min(low[u],dfn[v]);
    }
    <span class="keyword">if</span>(dfn[u]==low[u])
    {
        scc++;
        <span class="keyword">while</span>(<span class="number">1</span>)
        {
            v=sta[top--];
            instack[v]=<span class="number">0</span>;
            belong[v]=scc;
            <span class="keyword">if</span>(v==u)
                <span class="keyword">break</span>;
        }
    }
}

<span class="keyword">int</span> que[M];
<span class="keyword">int</span> rear = <span class="number">0</span>;
<span class="function"><span class="keyword">void</span> <span class="title">output</span><span class="params">(<span class="keyword">int</span> a)</span></span>{
    que[rear++] = a;
}

<span class="keyword">int</span> n,m;
<span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> fa)</span></span>{
    <span class="keyword">int</span> i,v;
    vis[u] = <span class="keyword">true</span>;
    <span class="keyword">if</span> (u == belong[n])
        <span class="keyword">return</span> <span class="keyword">true</span>;
    <span class="keyword">for</span>(i=first2[u];i!=-<span class="number">1</span>;i=edge2[i].next)
    {
        <span class="comment">//printf("%d\n",i);</span>
        v=edge2[i].v;
        <span class="keyword">if</span> (vis[v])
            <span class="keyword">continue</span>;
        <span class="keyword">if</span>(i==(fa^<span class="number">1</span>))
            <span class="keyword">continue</span>;
        <span class="keyword">if</span> (dfs(v,i)){
            output(edge2[i].i);
            <span class="keyword">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keyword">return</span> <span class="keyword">false</span>;
}

<span class="keyword">int</span> _edge[M][<span class="number">2</span>];

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>
</span>{
    <span class="keyword">int</span> u,v,i;
    <span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)){
        g=cnt=top=scc=<span class="number">0</span>;
        <span class="built_in">memset</span>(first,-<span class="number">1</span>,<span class="keyword">sizeof</span>(first));
        <span class="built_in">memset</span>(low,<span class="number">0</span>,<span class="keyword">sizeof</span>(low));
        <span class="built_in">memset</span>(dfn,<span class="number">0</span>,<span class="keyword">sizeof</span>(dfn));
        <span class="built_in">memset</span>(instack,<span class="number">0</span>,<span class="keyword">sizeof</span>(instack));
        <span class="built_in">memset</span>(degree,<span class="number">0</span>,<span class="keyword">sizeof</span>(degree));
        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;i++)
        {
            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;u,&amp;v);
            {
                u ++;
                v ++;
                _edge[i][<span class="number">0</span>] = u;
                _edge[i][<span class="number">1</span>] = v;
                AddEdge(u,v);
                AddEdge(v,u);
            }
        }
        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)
            <span class="keyword">if</span>(!dfn[i])
                Tarjan(i,-<span class="number">1</span>);

        <span class="comment">//printf("DEBUG %d\n",scc);</span>
        <span class="built_in">memset</span>(first2,-<span class="number">1</span>,<span class="keyword">sizeof</span>(first2));
        g2 = <span class="number">0</span>;
        <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;m;i++){
            <span class="keyword">int</span> u = belong[_edge[i][<span class="number">0</span>]];
            <span class="keyword">int</span> v = belong[_edge[i][<span class="number">1</span>]];
            AddEdge2(u,v,i);
            AddEdge2(v,u,i);
        }
        <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span> vis);
        rear = <span class="number">0</span>;
        dfs(belong[<span class="number">1</span>],-<span class="number">1</span>);

        sort(que,que+rear);
        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,rear);
        <span class="comment">//if (rear &gt; 0)</span>
        {
            <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;rear;i++){
                <span class="built_in">printf</span>(<span class="string">"%d"</span>,que[i]);
                <span class="keyword">if</span> (i &lt; rear-<span class="number">1</span>)
                    <span class="built_in">printf</span>(<span class="string">" "</span>);
            }
            <span class="built_in">printf</span>(<span class="string">"\n"</span>);
        }
    }
    <span class="comment">/*
       for(i=1;i&lt;=n;i++)
       {
       for(j=first[i];j!=-1;j=edge[j].next)
       {
       v=edge[j].v;
       if(belong[i]!=belong[v])
       degree[belong[i]]++;
       }
       }
       int sum=0; for(i=1;i&lt;=n;i++)
       if(degree[i]==1)
       sum++;
       int ans=(sum+1)/2;
       printf("%d\n",ans);
     */</span>
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/ACM/">ACM</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/11/02/CountTheLength/" title="Count the Length 数学" itemprop="url">Count the Length 数学</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Donald Wu" target="_blank" itemprop="author">Donald Wu</a>
		
  <p class="article-time">
    <time datetime="2015-11-02T10:42:59.331Z" itemprop="datePublished"> 發表於 2015-11-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Count the Length<br>Time Limit: 2000MS        Memory Limit: 65536KB        64bit IO Format: %lld &amp; %llu<br>Submit</p>
<p>Status</p>
<p>Description<br>You are given a board of m<em>n, so there are m</em>n unit squares(1*1) in the board. Suppose all unit squares are colored red or blue, and no adjacent(have common edge) unit squares share the same color. Consider the diagonal D of the board from left bottom to right top, D is a segment with color too, a point in D is red(or blue) if it falls in a red(or blue) unit square. Assume the left bottom square’s color is red, then what is the total length of red part of the diagonal D?</p>
<p>the sample of 2 * 4 board</p>
<p>the total length of red part of the diagonal is 2.236068<br>Input<br>There are multiple test cases(less than 10000). Each case is a line containing two integers m,n(1 ≤ m,n ≤ 2^31-1).</p>
<p>Output<br>For each case, output a single line containing the right answer(rounded up to 3 digits after the decimal point).</p>
<p>Sample Input<br>2 4<br>1 3<br>Sample Output<br>2.236<br>2.108</p>
<p>最大公约数</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> &lt;cstdio&gt;</span>
<span class="preprocessor">#<span class="keyword">include</span> &lt;cmath&gt;</span>

<span class="function"><span class="keyword">int</span> <span class="title">GCD</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span>
</span>{
    <span class="keyword">while</span>(b != <span class="number">0</span>)
    {
        <span class="keyword">int</span> r = b;
        b = a % b;
        a = r;
    }
    <span class="keyword">return</span> a;
}


<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{
    <span class="keyword">int</span> m,n;
    <span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;m,&amp;n)){
        <span class="keyword">int</span> gcd = GCD(m,n);
        m /= gcd;
        n /= gcd;
        <span class="keyword">double</span> mm = m;
        <span class="keyword">double</span> nn = n;
        <span class="keyword">double</span> sum = mm*nn;
        <span class="keyword">double</span> ans = <span class="built_in">sqrt</span>(mm*mm + nn*nn) * (<span class="keyword">double</span>)gcd;
        ans = ans*<span class="built_in">ceil</span>(sum/<span class="number">2.0</span>)/sum;
        <span class="built_in">printf</span>(<span class="string">"%.3lf\n"</span>,ans);
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/ACM/">ACM</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/11/02/第一次撸站笔记/" title="第一次撸站记录" itemprop="url">第一次撸站记录</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Donald Wu" target="_blank" itemprop="author">Donald Wu</a>
		
  <p class="article-time">
    <time datetime="2015-11-02T10:42:59.331Z" itemprop="datePublished"> 發表於 2015-11-02</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>其实不算第一次，上次是imo系统脑残到找回密码时只需前台验证就可以，直接绕过了。</p>
<p>一直想搞某学校的网站。于是稍微多学了一点东西之后，又来这个网站逛。我想应该首先找留言、登录、上传的地方，上一次在主站登录的地方失利，这一次就找一找别的地方。</p>
<p>找到一个”教学资源库管理”，不过是另一个地址了，估计是另一个主机吧。进去之后发现很酷炫，有很多不该有的功能（一个教学资源库管理平台为什么要还有山寨vmware workstation呢？）去查了一下，是一个厦门大学的硕士生写的。OrZ。</p>
<p>弱密码admin,admin，OrZ，我总是不相信会有这些不可思议的傻逼。</p>
<p>可以上传文件。试了一下，可以上传php文件。含有xss代码的html文件是可以正常访问的，但是没有意义，因为这个数据库是和主站独立的，并且这个网站根本没人用。但是不能正确获取上传上去的php文件的地址（确认是上传成功的，因为能下载下来，只是访问的时候显示404）。于是我去找这个系统的源码，打算审计一下，无奈下载下来的代码和实际的这个很不一样。</p>
<p>于是另寻他路，这个系统有太多功能了，于是我一个一个地看。。看到有预览功能，还可以自己改代码。。我就添加了一项php，发现它的预览功能其实是用html来包装，所以感觉没什么余地。</p>
<p>我想是不是.htaccess限制了不能跨域访问php文件（其实是我想多了，高估了这个网管），于是我想是不是要上传一个写了ajax的html上去，那样的话，就有点麻烦了。</p>
<p>后来得到室友的提醒（其实他也只是说了是不是限制了可以执行的类型，不过不知为何我的脑洞被打开了）。其实只是这台服务器没有装php，运行不了而已，所以显示404，不是限制了。这个系统也是asp的。于是上传了一个asp的web shell上去，能成功打开了。</p>
<p>nmap扫描了一下，发现3389端口开着。</p>
<p>kow用菜刀帮我建立了管理员账号，我自己用这个web shell老是不成功，不知道为什么。并且在他的vps上连接上了。貌似一般没有开3389端口时都需要lcx反弹来远控（也就是端口转发。在远端运行一个lcx的监听进程）</p>
<p>kow告诉我这些webshell都是有后门的，以后只好再另寻他路。</p>
<p>第一次撸站成功，好有成就感。</p>
<hr>
<p>“( ゜- ゜)つロ </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Security/">Security</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/2/"><span></span>Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/4/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="顯示側邊欄"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隱藏側邊欄"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分類</p>
		<ul>
		
		  
			<li><a href="/categories/ACM/" title="ACM">ACM<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/AI/" title="AI">AI<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/CTF/" title="CTF">CTF<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Cryptography/" title="Cryptography">Cryptography<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/HPC/" title="HPC">HPC<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/Just4Fun/" title="Just4Fun">Just4Fun<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Math/" title="Math">Math<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Networking/" title="Networking">Networking<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Programming/" title="Programming">Programming<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Security/" title="Security">Security<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Server/" title="Server">Server<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/programming/" title="programming">programming<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/pwn/" title="pwn">pwn<sup>3</sup></a></li>
		  
		
		</ul>
</div>


  

  <div class="linkslist">
  <p class="asidetitle">友情鏈接</p>
    <ul>
        
          <li>
            
            	<a href="http://blog.ikow.cn" target="_blank" title="k神">k神</a>
            
          </li>
        
          <li>
            
            	<a href="http://nlfox.sinaapp.com" target="_blank" title="狐神">狐神</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 訂閱</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> wuyihao. ^_^ <br/>
			Major in Network Engineering. Fancy 4 Algorithm, Infomation Security. Computer Network. etc</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="Donald Wu">Donald Wu</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回頂部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
